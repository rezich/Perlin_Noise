based on https://gist.github.com/nowl/828013
not used in awhileâ€”may be broken due to language changes.
